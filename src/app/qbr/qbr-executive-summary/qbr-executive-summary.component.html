<div>
  <div class="pull-right mb10">
    <button class="primary-button ml20" (click)="commonServ.generatePdfQbr(cardTitle, 'exportDiv', null)"
            [disabled]="commonServ.pdfLoading" [ngClass]="{'button-disabled': commonServ.pdfLoading}">Export
      <img src="assets/images/Downloads.svg" width="25px" height="20px" alt="icon"/>
    </button>
  </div>
  <div class="clear-both"></div>
  <div class="qbr-wrapper">
    <div class="qbr-panel position-relative" id="exportDiv" #exportDiv>
      <div class="card-title">Executive Summary<span class="dot-full dot-full-online"></span></div>
      <div class="p-grid mt40" *ngIf="currentOverviewMetric && compareOverviewMetric">
        <div class="p-md-6 no-padding">
          <div class="p-grid gray-border-left">
            <div class="p-md-6 no-padding">
              <div>
                <span class="dot-full-right"></span>
                <img alt="icon" src="assets/images/bills.svg" class="qbr-icon mb5 mr10 ml10">
                <span class="qbr-label">{{ totalSpendMetric.label}}</span>
              </div>
              <div class="ml20">
                <div class="qbr-subtitle">{{ totalSpendMetric.amount | number:'1.0-0'}}</div>

              </div>
            </div>
            <div class="p-md-6 position-relative">
              <div class="cell-center text-center">
                <bd-yoy-number-widget [label]="'QoQ'" [direction]="totalSpendMetric.directionQoQ" *ngIf="qbrType !== 'YoY'"
                                      [increase]="totalSpendMetric.percentQoQ"
                                      [size]="'lg'"></bd-yoy-number-widget>
                <bd-yoy-number-widget [label]="'YoY'" [direction]="totalSpendMetric.directionYoY" *ngIf="qbrType === 'YoY'"
                                      [increase]="totalSpendMetric.percentYoY"
                                      [size]="'lg'"></bd-yoy-number-widget>
              </div>
            </div>
          </div>

          <div class="p-grid gray-border-left mt60">
            <div class="p-md-12 no-padding">
              <div class="justify-between">
                <div>
                  <span class="dot-full-right"></span>
                  <img alt="icon" src="assets/images/total_bb.svg" class="qbr-icon-sm mb5 mr10 ml20">
                  <span class="qbr-label">Block Billed</span>
                </div>
                <div>
                  <img alt="icon" src="assets/images/chart-pie.png" class="qbr-icon mb5 mr10 ml10">
                  <span class="qbr-label mr40">Hours Worked By TimeKeeper Level</span>
                </div>
              </div>

              <div class="p-grid mt20">
                <!--pie charts -->
                <div class="p-md-5 justify-center">
                  <chart [options]="optionsBB" (load)="saveInstanceBB($event.context)"></chart>
                </div>
                <div class="p-md-7 justify-center">
                  <chart [options]="optionsHours" (load)="saveInstanceHours($event.context)"></chart>
                </div>
              </div>

              <div class="p-grid mt20">
                <!--chart labels -->
                <div class="p-md-5 justify-center">
                  <div class="text-center">
                    <bd-yoy-number-widget [label]="'QoQ'" [direction]="bbMetric.directionQoQ" *ngIf="qbrType !== 'YoY'"
                                          [increase]="bbMetric.percentQoQ"
                                          [size]="'lg'"></bd-yoy-number-widget>
                    <bd-yoy-number-widget [label]="'YoY'" [direction]="bbMetric.directionYoY" *ngIf="qbrType === 'YoY'"
                                          [increase]="bbMetric.percentYoY"
                                          [size]="'lg'"></bd-yoy-number-widget>
                  </div>
                </div>
                <div class="p-md-7 justify-center">
                  <div class="hours-div" *ngFor="let tk of tkHours;let i=index;"
                       [ngClass]="{'metrics-div-border': i > 0}">
                    <div class="qbr-label mb15">
                    <span class="tk-bar-lg"
                          [ngClass]="{'partner-bar': tk.label === 'Partner', 'associate-bar': tk.label === 'Associate' , 'other-bar': tk.label === 'Other', 'paralegal-bar':  tk.label === 'Paralegal'}"></span>
                      <span *ngIf="tkHours.length > 3">{{qbrService.formatShortTKLabel(tk.label)}}</span>
                      <span *ngIf="tkHours.length <= 3">{{ tk.label }}</span>
                    </div>
                    <bd-yoy-number-widget [label]="'QoQ'" [direction]="tk.directionQoQ" [increase]="tk.percentQoQ" *ngIf="qbrType !== 'YoY'" [light]="tkHours.length > 3"
                                          [size]="'md'"></bd-yoy-number-widget>
                    <bd-yoy-number-widget [label]="'YoY'" [direction]="tk.directionYoY" [increase]="tk.percentYoY" *ngIf="qbrType === 'YoY'" [light]="tkHours.length > 3"
                                          [size]="'md'"></bd-yoy-number-widget>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>
        <!--second column-->
        <div class="p-md-6 no-padding gray-border-left">
          <bd-qbr-executive-summary-right [metrics]="rightSideMetrics"
                                          [qbrType]="qbrType"></bd-qbr-executive-summary-right>
        </div>
      </div>
      <div class="page-number-circle">
          <div class="page-number">5</div>
      </div>
    </div>

  </div>
</div>

