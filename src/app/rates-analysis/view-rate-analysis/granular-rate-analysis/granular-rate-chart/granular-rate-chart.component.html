<div class="p-grid full-width" style="padding: 32px; border-bottom: 2px solid #E9F1F4; padding-bottom: 4.5em;">
  <div style="width: 50%; padding-left: 1em;">
    <em class="icon-user" style="font-size: 20px;"></em>
    <span *ngIf="classification === 'partner'" class="header-span" style="display: inline; font-size: 24px !important; padding-left: 1em;">Partner Tier {{tier}}</span>
    <span *ngIf="classification === 'associate'" class="header-span">{{seniority}} Associate</span>
  </div>

  <div style="width: 50%; padding-top: 1em;" *ngIf="validFirmData">
    <div class="rate-impact">
      <div style="display: inline; position: absolute; margin-top: 8px;">
        <span class="ml10 pointer-hand" placement="bottom"
              [ngbPopover]="helpText"
              popoverTitle="Rate Impact"
              [openDelay]="100"
              [closeDelay]="2000"
              triggers="mouseenter:mouseleave"
              style="height: 16px; width: 16px; margin-right: 0.75em; margin-left: 4px !important; color: black !important; background: #D6DEE1; border-radius: 16px; font-size: 13px; font-weight: 400; justify-content: center; align-items: center; display: inline-flex; font-family: 'Roboto';">?
        </span>
      </div>
      <div style="display: inline; padding-left: 2.5em; padding-right: 3.5em;">
        <span style="font-family: 'Roboto Bold' !important; font-size: 24px; padding-right: 0.5em;">
          Rate Impact
        </span>

        <div [ngStyle]="{'margin-right': '1.25em', 'background': rateImpactColor, 'border-radius': '16px', 'height': '24px', 'color': 'white', 'font-family': 'Roboto', 'font-size': '16px', 'display': 'inline-flex', 'justify-content': 'center', 'align-items': 'center', 'margin-top': '12px', 'width': 'auto', 'padding': '2px 7px'}">
          {{rateImpact}}
        </div>

        <div style="font-family: 'Roboto'; margin-top: 12px; display: inline;">
          Hours Worked: <span style="font-family: 'Roboto Bold';">{{totalSeniorityHoursFormatted}}</span>
          <span style="padding-left: 2em;">% of Hours:</span><span style="font-family: 'Roboto Bold';"> {{percentOfTotalHours | number:'1.0-0'}}%</span>
        </div>
      </div>
    </div>
  </div>

</div>

<div *ngIf="!validFirmData" style="font-family: 'Roboto'; padding: 12px 0px 8px 32px;">
  No data for this classification/seniority level for {{firmName}} in {{benchmark.year}}, {{benchmark.smart_practice_area}} spend.
</div>

<div class="p-grid full-width" style="padding-top: 56px; padding-bottom: 40px;" *ngIf="validFirmData">
  <div style="width: 12% !important; padding: 32px 0px 32px 48px !important;">

    <div class="labels mb10">{{firmName}}</div>
    <div *ngIf="validInternalBM" class="labels mb5">Internal</div>
  </div>
  <div #chartPanel  style="width: 88% !important; display: inline-block; position: relative; z-index: 1; padding: 32px !important;">
    <div *ngIf="validMarketAverage" #bmPanel class="market-average" [ngStyle]="{'left': marketAverageLeft, 'width': marketAverageWidth, 'height': marketAverageHeight}">
      <div class="range-average-wrapper">

        <span class="average">Market Average</span>

        <p class="range">{{marketAverageLowerRangeFormatted}} - {{marketAverageUpperRangeFormatted}}</p>
      </div>

    </div>
    <div class="bar-div" [ngStyle]="{'background-color': topBarColor, 'width': topBarWidth, 'margin-bottom': '10px', 'font-size': '16px'}">
      ${{topBarDollars | number:'1.0-0'}}</div>
    <div *ngIf="validInternalBM" class="bar-div" [ngStyle]="{'background-color': '#8A8A8A', 'width': bottomBarWidth, 'font-size': '16px'}">
      ${{bottomBarDollars | number:'1.0-0'}}</div>
  </div>
</div>

<div style="padding: 32px; border-top: 2px solid #E9F1F4;" *ngIf="validFirmData">
  <div class="p-grid" style="line-height: 0.5em !important; padding-bottom: 0.25em;">
    <div style="width: 20%;">
      <span class="header-span" style="font-size: 16px !important; font-weight: 700 !important;">Benchmark Reference</span>
    </div>

    <div style="width: 15%;">
      <span class="header-span" style="font-size: 16px !important; padding-left: 0em !important; font-weight: 700 !important;">Rates</span>
    </div>

    <div style="width: 15%;">
      <span class="header-span" style="font-size: 16px !important; padding-left: 0em !important; font-weight: 700 !important;">You Pay</span>
    </div>

    <div style="width: 50%;">
      <span class="header-span" style="font-size: 16px !important; padding-left: 0em !important; font-weight: 700 !important;">Hourly Cost Impact</span>
    </div>

  </div>

  <div class="p-grid" style="padding-top: 1.25em;">
    <div style="width: 20%;">
      <span class="header-span" style="font-size: 16px !important; font-weight: 400 !important; font-family: 'Roboto' !important;">Market Rate</span>
    </div>

    <div style="width: 15%;">
      <span class="header-span" style="font-size: 16px !important; font-weight: 400 !important; font-family: 'Roboto' !important; padding-left: 0em !important;">{{marketAverageLowerRangeFormatted}} to {{marketAverageUpperRangeFormatted}}</span>
    </div>

    <div style="width: 15%;">
      <span class="header-span" style="font-size: 16px !important; font-weight: 400 !important; font-family: 'Roboto' !important; padding-left: 0em !important;">{{topBarDollarFormatted}}</span>
    </div>

    <div  style="width: 50%;">
      <span *ngIf="!withinRange && marketRateLowerDelta > 0 && marketRateUpperDelta > 0" [ngStyle]="{'color': topBarColor, 'font-size': '16px', 'font-family': 'Roboto'}">+${{marketRateLowerDelta | number:'1.0-0'}} - ${{marketRateUpperDelta | number:'1.0-0'}}</span>
      <span *ngIf="!withinRange && marketRateLowerDelta < 0 && marketRateUpperDelta < 0" [ngStyle]="{'color': topBarColor, 'font-size': '16px', 'font-family': 'Roboto'}">-${{(marketRateLowerDelta * -1) | number:'1.0-0'}} - ${{(marketRateUpperDelta * -1) | number:'1.0-0'}}</span>
      <span *ngIf="withinRange" [ngStyle]="{'color': topBarColor, 'font-size': '16px', 'font-family': 'Roboto'}">-${{marketRateLowerDelta | number:'1.0-0'}} to +${{(marketRateUpperDelta * -1) | number:'1.0-0'}}</span> <span *ngIf="withinRange" class="internal-rate-pct" [ngStyle]="{'background': topBarColor}">Rate is within range</span>
      <span class="internal-rate-pct" [ngStyle]="{'background': topBarColor}" *ngIf="!withinRange && marketRateLowerDeltaPct > 0 && marketRateUpperDeltaPct > 0">{{marketRateLowerDeltaPct | number:'1.0-0'}}% to {{marketRateUpperDeltaPct | number:'1.0-0'}}% ↑</span>
      <span class="internal-rate-pct" [ngStyle]="{'background': topBarColor}" *ngIf="!withinRange && marketRateLowerDeltaPct < 0 && marketRateUpperDeltaPct < 0">{{(marketRateLowerDeltaPct * -1) | number:'1.0-0'}}% to {{(marketRateUpperDeltaPct * -1) | number:'1.0-0'}}% ↓</span>
      <!-- <span *ngIf="!withinRange" style="padding-left: 2em">{{marketRateDeltaPct}}</span> -->
    </div>

  </div>

  <div class="p-grid" style="padding-top: 1em;" *ngIf="validInternalBM">
    <div style="width: 20%;">
      <span class="header-span" style="font-size: 16px !important; font-weight: 400 !important; font-family: 'Roboto' !important;">Internal Rate</span>
    </div>

    <div style="width: 15%;">
      <span class="header-span" style="font-size: 16px !important; font-weight: 400 !important; font-family: 'Roboto' !important; padding-left: 0em !important;">{{bottomBarDollarFormatted}}</span>
    </div>

    <div style="width: 15%;">
      <span class="header-span" style="font-size: 16px !important; font-weight: 400 !important; font-family: 'Roboto' !important; padding-left: 0em !important;">{{topBarDollarFormatted}}</span>
    </div>

    <div style="width: 50%;">
      <span *ngIf="internalRateDelta > 0" [ngStyle]="{'color': internalRateColor, 'font-size': '16px', 'font-family': 'Roboto'}">+${{internalRateDelta | number:'1.0-0'}}</span>
      <span *ngIf="internalRateDelta <= 0" [ngStyle]="{'color': internalRateColor, 'font-size': '16px', 'font-family': 'Roboto'}">-${{(internalRateDelta * -1) | number:'1.0-0'}}</span>
      <span class="internal-rate-pct" *ngIf="internalRateDeltaPct && internalRateDeltaPct > 0" [ngStyle]="{'background': internalRateColor, 'font-size': '16px'}">{{internalRateDeltaPct | number:'1.0-0'}}% ↑</span>
      <span class="internal-rate-pct" *ngIf="internalRateDeltaPct && internalRateDeltaPct < 0" [ngStyle]="{'background': internalRateColor, 'font-size': '16px'}">{{(internalRateDeltaPct * -1) | number:'1.0-0'}}% ↓</span>
    </div>

  </div>

</div>
