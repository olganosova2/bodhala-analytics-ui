<div>

  <div *ngIf="!showMoreOpened">
    <div class="header-wrapper">

        <div class="p-grid">
          <div class="p-md-9">
            <i class="fa fa-chevron-down"></i>
            <span class="ml10">Metrics</span>
          </div>
          <div class="p-md-3 pr20">
            <div class="text-right">
              <span (click)="showMore()" class="orange-button pointer-hand">
              <img alt="Bodhala Logo" src="assets/images/favicon.png" class="small-logo">
              See more on Bodhala
                <em class="icon-note"></em>
              </span>
              </div>
          </div>
    </div>
  </div>
  <div *ngIf="!showMoreOpened" class="bm-div-wrapper position-relative">
    <ngb-alert type="danger" *ngIf="inputParametersError">
      <div class="font-red font-bold" [innerHTML]="inputParametersError"></div>
    </ngb-alert>
    <ngb-alert type="danger" *ngIf="error">
      <div class="font-red font-bold">
        <span>{{vendorFirmName}}: {{error}}</span>
      </div>
    </ngb-alert>
    <div class="p-grid">
      <div class="p-col-2" *ngIf="tkTotalHours">
        <div class="grid-inner full-height pl15 pt15">
          <div >
          <div class="pr20" *ngFor="let metric of summaryMetrics">
            <div class="summary-card" >
              <div class="summary-card-title">
                {{metric.label}}
              </div>
              <div  *ngIf="metric.format !== 'string'">
               <span *ngIf="metric.format === 'dollar'">$</span>{{metric.amount | number:'1.0-0'}}
              </div>
              <div  *ngIf="metric.format === 'string'">
                  {{ metric.amount }}
              </div>
            </div>
          </div>
        </div>
        </div>
      </div>
      <div class="p-col-10" [ngClass]="{'p-col-12': !tkTotalHours}">
        <div class="grid-inner full-height pt20">
          <div class="mt20 mr20" *ngIf="charts && charts.length > 0 && highestRate">
      <div *ngFor="let chart of charts;let i=index;">
        <bd-benchmark-generic-chart  [benchmark]="chart" [highestRate]="highestRate" [isFirst]="i === 0" [isLast]="i===(charts.length - 1)"></bd-benchmark-generic-chart>
      </div>
    </div>
        </div>
      </div>
    </div>
    <div class="spinner-card" [hidden]="!tkRequestInProgress">
      <mat-spinner diameter="50" color="primary"></mat-spinner>
    </div>
  </div>
  <div *ngIf="showMoreOpened && firmId" class="position-relative loading-div">
    <ngb-alert type="danger" *ngIf="errorBM">
      <div class="font-red font-bold">
        <span>{{errorBM}}</span>
      </div>
    </ngb-alert>
    <div class="loading-message" [hidden]="!inProgress">Saving the Rate BM and calculating market averages and panel rates ... </div>
    <div class="spinner-card" [hidden]="!inProgress">
      <mat-spinner diameter="50" color="primary"></mat-spinner>
    </div>

  </div>
</div>
