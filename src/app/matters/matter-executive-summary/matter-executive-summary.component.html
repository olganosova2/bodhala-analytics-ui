<div class="exs-div" id="matterAnalysis">
  <div><span class="font-bold">Matter Staffing Analysis</span> Matter: <span *ngIf="summaryData?.matter_name">{{summaryData?.matter_name}}</span></div>
  <bd-matter-title-bar [matterId]="matterId" [firmId]="firmId" [title]="'Matter Overview'" [index]="0" (firmSelected)="selectFirm($event)"
  (singleFirmLoaded)="getMatterInsight($event)"></bd-matter-title-bar>
<div class="insights-bar justify-start mt30" *ngIf="insightText">
  <img src="assets/images/logo-black-short.png" width="40px" height="44px" class="mr20"/>
  <div class="ml20 mr20">
    <span>INSIGHTS &</span><br/><span>RECOMMENDATIONS</span>
  </div>
  <div class="insights-content ml20 roboto-div" [innerHTML]="utilService.formatTextForHtml(insightText, !insightExpanded, 210)"></div>
  <div *ngIf="insightText && insightText.length > 210">
    <button  class="primary-button insights-button" *ngIf="!insightExpanded" (click)="toggleInsight(true)">Read more
      <i class="fa fa-angle-down ml10"></i></button>
    <button  class="primary-button insights-button" *ngIf="insightExpanded" (click)="toggleInsight(false)">Close
      <i class="fa fa-angle-up ml10"></i></button>
  </div>
</div>
  <bd-matter-summary-card *ngIf="summaryData"
                          [page]="'Overview'"
                          [summaryData]="summaryData"
                          [marketData]="marketData"
                          [marketRecords]="marketRecords"></bd-matter-summary-card>
  <bd-matter-totals-metrics [firmId]="firmId" [matterId]="matterId" (dataLoaded)="assignData($event)" #totalMetrics></bd-matter-totals-metrics>
  <div class="panel-wrapper mt20">
    <div class="justify-between">
      <div class="exs-panel-title">Top Tasks / Documents</div>
      <div class="valign-middle pointer-hand mr30" (click)="goToViewDocs()">View All  <i class="fa fa-angle-right ml10"></i></div>
    </div>
    <div class="mt20" *ngIf="documents.length === 0">No documents found.</div>
    <table class="full-width" *ngIf="documents.length > 0">
      <thead>
      <tr class="font-bold">
        <th>Document Type</th>
        <th>Total Cost</th>
        <th># Hours Worked</th>
        <th>% Total Hours</th>
      </tr>
      </thead>
      <tr *ngFor="let doc of documents">
        <td>{{doc.canonical}}</td>
        <td>${{doc.total_cost | number:'1.0-0'}}</td>
        <td>{{doc.total_hours | number:'1.1-1'}}</td>
        <td>{{doc.total_hours / (doc.total_doc_hours_all || 1) * 100 | number:'1.1-1'}}%</td>

      </tr>

    </table>
  </div>
  <bd-matter-total-spend *ngIf="summaryData"
                         [page]="'Overview'"
                         [summaryData]="summaryData"
                         [marketData]="marketData"
                         [marketRecords]="marketRecords"
                         [metricType]="'TotalSpend'"></bd-matter-total-spend>
</div>
